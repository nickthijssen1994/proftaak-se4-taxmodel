server {
  listen 80;
  server_name  localhost;

     location /en/ {
          alias   /usr/share/nginx/html/en/;
          try_files $uri$args $uri$args/ /en/index.html;
      }
      location /nl/ {
          alias   /usr/share/nginx/html/nl/;
          try_files $uri$args $uri$args/ /nl/index.html;
      }

      set $first_language $http_accept_language;
      if ($http_accept_language ~* '^(.+?),') {
          set $first_language $1;
      }

      set $language_suffix 'en';
      if ($first_language ~* 'nl') {
          set $language_suffix 'nl';
      }

      location / {
          rewrite ^/$ http://localhost:4200/$language_suffix/index.html permanent;
      }
}
